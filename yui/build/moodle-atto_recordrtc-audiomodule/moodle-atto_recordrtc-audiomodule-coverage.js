if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/moodle-atto_recordrtc-audiomodule/moodle-atto_recordrtc-audiomodule.js']) {
   __coverage__['build/moodle-atto_recordrtc-audiomodule/moodle-atto_recordrtc-audiomodule.js'] = {"path":"build/moodle-atto_recordrtc-audiomodule/moodle-atto_recordrtc-audiomodule.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":45},"end":{"line":1,"column":64}}},"2":{"name":"(anonymous_2)","line":29,"loc":{"start":{"line":29,"column":31},"end":{"line":29,"column":42}}},"3":{"name":"(anonymous_3)","line":44,"loc":{"start":{"line":44,"column":27},"end":{"line":44,"column":38}}},"4":{"name":"(anonymous_4)","line":73,"loc":{"start":{"line":73,"column":33},"end":{"line":73,"column":50}}},"5":{"name":"(anonymous_5)","line":83,"loc":{"start":{"line":83,"column":32},"end":{"line":83,"column":51}}},"6":{"name":"(anonymous_6)","line":88,"loc":{"start":{"line":88,"column":40},"end":{"line":88,"column":56}}},"7":{"name":"(anonymous_7)","line":98,"loc":{"start":{"line":98,"column":42},"end":{"line":98,"column":53}}},"8":{"name":"(anonymous_8)","line":123,"loc":{"start":{"line":123,"column":40},"end":{"line":123,"column":51}}},"9":{"name":"(anonymous_9)","line":131,"loc":{"start":{"line":131,"column":23},"end":{"line":131,"column":34}}},"10":{"name":"(anonymous_10)","line":149,"loc":{"start":{"line":149,"column":34},"end":{"line":149,"column":51}}},"11":{"name":"(anonymous_11)","line":157,"loc":{"start":{"line":157,"column":8},"end":{"line":157,"column":30}}},"12":{"name":"(anonymous_12)","line":165,"loc":{"start":{"line":165,"column":8},"end":{"line":165,"column":24}}},"13":{"name":"(anonymous_13)","line":171,"loc":{"start":{"line":171,"column":35},"end":{"line":171,"column":52}}},"14":{"name":"(anonymous_14)","line":176,"loc":{"start":{"line":176,"column":31},"end":{"line":176,"column":47}}},"15":{"name":"(anonymous_15)","line":195,"loc":{"start":{"line":195,"column":24},"end":{"line":195,"column":35}}},"16":{"name":"(anonymous_16)","line":204,"loc":{"start":{"line":204,"column":55},"end":{"line":204,"column":90}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":228,"column":70}},"2":{"start":{"line":29,"column":0},"end":{"line":146,"column":2}},"3":{"start":{"line":31,"column":4},"end":{"line":31,"column":52}},"4":{"start":{"line":32,"column":4},"end":{"line":32,"column":63}},"5":{"start":{"line":33,"column":4},"end":{"line":33,"column":56}},"6":{"start":{"line":34,"column":4},"end":{"line":34,"column":22}},"7":{"start":{"line":36,"column":4},"end":{"line":36,"column":88}},"8":{"start":{"line":39,"column":4},"end":{"line":39,"column":38}},"9":{"start":{"line":41,"column":4},"end":{"line":41,"column":39}},"10":{"start":{"line":44,"column":4},"end":{"line":145,"column":6}},"11":{"start":{"line":45,"column":8},"end":{"line":45,"column":23}},"12":{"start":{"line":46,"column":8},"end":{"line":46,"column":28}},"13":{"start":{"line":49,"column":8},"end":{"line":144,"column":9}},"14":{"start":{"line":53,"column":12},"end":{"line":53,"column":71}},"15":{"start":{"line":54,"column":12},"end":{"line":54,"column":68}},"16":{"start":{"line":57,"column":12},"end":{"line":57,"column":69}},"17":{"start":{"line":58,"column":12},"end":{"line":58,"column":72}},"18":{"start":{"line":61,"column":12},"end":{"line":64,"column":13}},"19":{"start":{"line":62,"column":16},"end":{"line":62,"column":68}},"20":{"start":{"line":63,"column":16},"end":{"line":63,"column":57}},"21":{"start":{"line":67,"column":12},"end":{"line":67,"column":24}},"22":{"start":{"line":68,"column":12},"end":{"line":68,"column":25}},"23":{"start":{"line":71,"column":12},"end":{"line":117,"column":14}},"24":{"start":{"line":75,"column":20},"end":{"line":75,"column":40}},"25":{"start":{"line":77,"column":20},"end":{"line":79,"column":21}},"26":{"start":{"line":78,"column":24},"end":{"line":78,"column":52}},"27":{"start":{"line":84,"column":20},"end":{"line":84,"column":47}},"28":{"start":{"line":89,"column":20},"end":{"line":89,"column":40}},"29":{"start":{"line":92,"column":20},"end":{"line":112,"column":21}},"30":{"start":{"line":93,"column":24},"end":{"line":102,"column":27}},"31":{"start":{"line":99,"column":36},"end":{"line":99,"column":52}},"32":{"start":{"line":104,"column":24},"end":{"line":104,"column":92}},"33":{"start":{"line":105,"column":27},"end":{"line":112,"column":21}},"34":{"start":{"line":107,"column":24},"end":{"line":107,"column":83}},"35":{"start":{"line":108,"column":24},"end":{"line":108,"column":83}},"36":{"start":{"line":109,"column":24},"end":{"line":109,"column":176}},"37":{"start":{"line":111,"column":24},"end":{"line":111,"column":93}},"38":{"start":{"line":115,"column":20},"end":{"line":115,"column":58}},"39":{"start":{"line":120,"column":12},"end":{"line":120,"column":58}},"40":{"start":{"line":123,"column":12},"end":{"line":125,"column":14}},"41":{"start":{"line":124,"column":16},"end":{"line":124,"column":71}},"42":{"start":{"line":128,"column":12},"end":{"line":128,"column":43}},"43":{"start":{"line":131,"column":12},"end":{"line":133,"column":21}},"44":{"start":{"line":132,"column":16},"end":{"line":132,"column":37}},"45":{"start":{"line":136,"column":12},"end":{"line":136,"column":57}},"46":{"start":{"line":139,"column":12},"end":{"line":139,"column":84}},"47":{"start":{"line":140,"column":12},"end":{"line":143,"column":13}},"48":{"start":{"line":141,"column":16},"end":{"line":141,"column":60}},"49":{"start":{"line":142,"column":16},"end":{"line":142,"column":65}},"50":{"start":{"line":149,"column":0},"end":{"line":169,"column":2}},"51":{"start":{"line":150,"column":4},"end":{"line":168,"column":6}},"52":{"start":{"line":159,"column":12},"end":{"line":159,"column":43}},"53":{"start":{"line":161,"column":12},"end":{"line":161,"column":48}},"54":{"start":{"line":166,"column":12},"end":{"line":166,"column":49}},"55":{"start":{"line":171,"column":0},"end":{"line":225,"column":2}},"56":{"start":{"line":173,"column":4},"end":{"line":173,"column":25}},"57":{"start":{"line":176,"column":4},"end":{"line":178,"column":7}},"58":{"start":{"line":177,"column":8},"end":{"line":177,"column":21}},"59":{"start":{"line":181,"column":4},"end":{"line":181,"column":32}},"60":{"start":{"line":182,"column":4},"end":{"line":182,"column":43}},"61":{"start":{"line":185,"column":4},"end":{"line":185,"column":25}},"62":{"start":{"line":186,"column":4},"end":{"line":186,"column":27}},"63":{"start":{"line":187,"column":4},"end":{"line":187,"column":64}},"64":{"start":{"line":190,"column":4},"end":{"line":190,"column":67}},"65":{"start":{"line":191,"column":4},"end":{"line":191,"column":86}},"66":{"start":{"line":192,"column":4},"end":{"line":192,"column":31}},"67":{"start":{"line":195,"column":4},"end":{"line":224,"column":6}},"68":{"start":{"line":197,"column":8},"end":{"line":223,"column":9}},"69":{"start":{"line":198,"column":12},"end":{"line":198,"column":92}},"70":{"start":{"line":200,"column":12},"end":{"line":200,"column":32}},"71":{"start":{"line":201,"column":12},"end":{"line":201,"column":32}},"72":{"start":{"line":204,"column":12},"end":{"line":220,"column":15}},"73":{"start":{"line":205,"column":16},"end":{"line":219,"column":17}},"74":{"start":{"line":206,"column":20},"end":{"line":206,"column":41}},"75":{"start":{"line":207,"column":20},"end":{"line":207,"column":82}},"76":{"start":{"line":208,"column":23},"end":{"line":219,"column":17}},"77":{"start":{"line":209,"column":20},"end":{"line":209,"column":41}},"78":{"start":{"line":210,"column":20},"end":{"line":210,"column":116}},"79":{"start":{"line":211,"column":23},"end":{"line":219,"column":17}},"80":{"start":{"line":212,"column":20},"end":{"line":212,"column":41}},"81":{"start":{"line":213,"column":20},"end":{"line":213,"column":96}},"82":{"start":{"line":214,"column":23},"end":{"line":219,"column":17}},"83":{"start":{"line":215,"column":20},"end":{"line":215,"column":41}},"84":{"start":{"line":216,"column":20},"end":{"line":216,"column":117}},"85":{"start":{"line":218,"column":20},"end":{"line":218,"column":47}},"86":{"start":{"line":222,"column":12},"end":{"line":222,"column":29}}},"branchMap":{"1":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":49,"column":8}},{"start":{"line":49,"column":8},"end":{"line":49,"column":8}}]},"2":{"line":49,"type":"binary-expr","locations":[{"start":{"line":49,"column":13},"end":{"line":49,"column":89}},{"start":{"line":50,"column":13},"end":{"line":50,"column":86}},{"start":{"line":51,"column":13},"end":{"line":51,"column":90}}]},"3":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":12},"end":{"line":61,"column":12}},{"start":{"line":61,"column":12},"end":{"line":61,"column":12}}]},"4":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":20},"end":{"line":77,"column":20}},{"start":{"line":77,"column":20},"end":{"line":77,"column":20}}]},"5":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":20},"end":{"line":92,"column":20}},{"start":{"line":92,"column":20},"end":{"line":92,"column":20}}]},"6":{"line":92,"type":"binary-expr","locations":[{"start":{"line":92,"column":25},"end":{"line":92,"column":63}},{"start":{"line":92,"column":68},"end":{"line":92,"column":82}}]},"7":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":27},"end":{"line":105,"column":27}},{"start":{"line":105,"column":27},"end":{"line":105,"column":27}}]},"8":{"line":105,"type":"binary-expr","locations":[{"start":{"line":105,"column":32},"end":{"line":105,"column":69}},{"start":{"line":106,"column":32},"end":{"line":106,"column":62}}]},"9":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":12},"end":{"line":140,"column":12}},{"start":{"line":140,"column":12},"end":{"line":140,"column":12}}]},"10":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":8},"end":{"line":197,"column":8}},{"start":{"line":197,"column":8},"end":{"line":197,"column":8}}]},"11":{"line":197,"type":"binary-expr","locations":[{"start":{"line":197,"column":12},"end":{"line":197,"column":23}},{"start":{"line":197,"column":27},"end":{"line":197,"column":40}}]},"12":{"line":205,"type":"if","locations":[{"start":{"line":205,"column":16},"end":{"line":205,"column":16}},{"start":{"line":205,"column":16},"end":{"line":205,"column":16}}]},"13":{"line":208,"type":"if","locations":[{"start":{"line":208,"column":23},"end":{"line":208,"column":23}},{"start":{"line":208,"column":23},"end":{"line":208,"column":23}}]},"14":{"line":211,"type":"if","locations":[{"start":{"line":211,"column":23},"end":{"line":211,"column":23}},{"start":{"line":211,"column":23},"end":{"line":211,"column":23}}]},"15":{"line":214,"type":"if","locations":[{"start":{"line":214,"column":23},"end":{"line":214,"column":23}},{"start":{"line":214,"column":23},"end":{"line":214,"column":23}}]}},"code":["(function () { YUI.add('moodle-atto_recordrtc-audiomodule', function (Y, NAME) {","","// TinyMCE recordrtc library functions.","// @package    tinymce_recordrtc.","// @author     Jesus Federico  (jesus [at] blindsidenetworks [dt] com).","// @copyright  2016 to present, Blindside Networks Inc.","// @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later.","","/** global: M */","/** global: bowser */","/** global: recordrtc */","/** global: player */","/** global: startStopBtn */","/** global: uploadBtn */","/** global: countdownSeconds */","/** global: countdownTicker */","/** global: recType */","/** global: mediaRecorder */","/** global: chunks */","/** global: blobSize */","/** global: maxUploadSize */","","/**"," * This function is initialized from PHP"," *"," * @param {Object}"," *            Y YUI instance"," */","Y.M.atto_recordrtc.view_init = function() {","    // Assignment of global variables.","    player = document.querySelector('audio#player');","    startStopBtn = document.querySelector('button#start-stop');","    uploadBtn = document.querySelector('button#upload');","    recType = 'audio';","    // Extract the numbers from the string, and convert to bytes.","    maxUploadSize = parseInt(recordrtc.maxfilesize.match(/\\d+/)[0]) * Math.pow(1024, 2);","","    // Show alert and redirect user if connection is not secure.","    Y.M.atto_recordrtc.check_secure();","    // Show alert if using non-ideal browser.","    Y.M.atto_recordrtc.check_browser();","","    // Run when user clicks on \"record\" button.","    startStopBtn.onclick = function() {","        var btn = this;","        btn.disabled = true;","","        // If button is displaying \"Start Recording\" or \"Record Again\".","        if ((btn.textContent === M.util.get_string('startrecording', 'tinymce_recordrtc')) ||","            (btn.textContent === M.util.get_string('recordagain', 'tinymce_recordrtc')) ||","            (btn.textContent === M.util.get_string('recordingfailed', 'tinymce_recordrtc'))) {","            // Hide alert-danger if it is shown.","            var alert = document.querySelector('div[id=alert-danger]');","            alert.parentElement.parentElement.classList.add('hide');","","            // Make sure the audio player and upload button are not shown.","            player.parentElement.parentElement.classList.add('hide');","            uploadBtn.parentElement.parentElement.classList.add('hide');","","            // Change look of recording button.","            if (!recordrtc.oldermoodle) {","                startStopBtn.classList.remove('btn-outline-danger');","                startStopBtn.classList.add('btn-danger');","            }","","            // Empty the array containing the previously recorded chunks.","            chunks = [];","            blobSize = 0;","","            // Initialize common configurations.","            var commonConfig = {","                // When the stream is captured from the microphone/webcam.","                onMediaCaptured: function(stream) {","                    // Make audio stream available at a higher level by making it a property of btn.","                    btn.stream = stream;","","                    if (btn.mediaCapturedCallback) {","                        btn.mediaCapturedCallback();","                    }","                },","","                // Revert button to \"Record Again\" when recording is stopped.","                onMediaStopped: function(btnLabel) {","                    btn.textContent = btnLabel;","                },","","                // Handle recording errors.","                onMediaCapturingFailed: function(error) {","                    var btnLabel = null;","","                    // If Firefox and Permission Denied error.","                    if ((error.name === 'PermissionDeniedError') && bowser.firefox) {","                        InstallTrigger.install({","                            'Foo': {","                                // Link: https://addons.mozilla.org/firefox/downloads/latest/655146/addon-655146...","                                // ...-latest.xpi?src=dp-btn-primary.","                                URL: 'https://addons.mozilla.org/en-US/firefox/addon/enable-screen-capturing/',","                                toString: function() {","                                    return this.URL;","                                }","                            }","                        });","","                        btnLabel = M.util.get_string('startrecording', 'tinymce_recordrtc');","                    } else if ((error.name === 'DevicesNotFoundError') ||","                               (error.name === 'NotFoundError')) { // If Device Not Found error.","                        var alert = document.querySelector('div[id=alert-danger]');","                        alert.parentElement.parentElement.classList.remove('hide');","                        alert.textContent = M.util.get_string('inputdevicealert_title', 'tinymce_recordrtc') + ' ' + M.util.get_string('inputdevicealert', 'tinymce_recordrtc');","","                        btnLabel = M.util.get_string('recordingfailed', 'tinymce_recordrtc');","                    }","","                    // Proceed to treat as a stopped recording.","                    commonConfig.onMediaStopped(btnLabel);","                }","            };","","            // Capture audio stream from microphone.","            Y.M.atto_recordrtc.captureAudio(commonConfig);","","            // When audio stream is successfully captured, start recording.","            btn.mediaCapturedCallback = function() {","                Y.M.atto_recordrtc.startRecording(recType, btn.stream);","            };","        } else { // If button is displaying \"Stop Recording\".","            // First of all clears the countdownTicker.","            clearInterval(countdownTicker);","","            // Disable \"Record Again\" button for 1s to allow background processing (closing streams).","            setTimeout(function() {","                btn.disabled = false;","            }, 1000);","","            // Stop recording.","            Y.M.atto_recordrtc.stopRecording(btn.stream);","","            // Change button to offer to record again.","            btn.textContent = M.util.get_string('recordagain', 'tinymce_recordrtc');","            if (!recordrtc.oldermoodle) {","                startStopBtn.classList.remove('btn-danger');","                startStopBtn.classList.add('btn-outline-danger');","            }","        }","    };","};","","// Setup to get audio stream from microphone.","Y.M.atto_recordrtc.captureAudio = function(config) {","    Y.M.atto_recordrtc.captureUserMedia(","        // Media constraints.","        {","            audio: true","        },","","        // Success callback.","        function(audioStream) {","            // Set audio player source to microphone stream.","            player.srcObject = audioStream;","","            config.onMediaCaptured(audioStream);","        },","","        // Error callback.","        function(error) {","            config.onMediaCapturingFailed(error);","        }","    );","};","","Y.M.atto_recordrtc.stopRecording = function(stream) {","    // Stop recording microphone stream.","    mediaRecorder.stop();","","    // Stop each individual MediaTrack.","    stream.getTracks().forEach(function(track) {","        track.stop();","    });","","    // Set source of audio player.","    var blob = new Blob(chunks);","    player.src = URL.createObjectURL(blob);","","    // Show audio player with controls enabled, and unmute.","    player.muted = false;","    player.controls = true;","    player.parentElement.parentElement.classList.remove('hide');","","    // Show upload button.","    uploadBtn.parentElement.parentElement.classList.remove('hide');","    uploadBtn.textContent = M.util.get_string('attachrecording', 'tinymce_recordrtc');","    uploadBtn.disabled = false;","","    // Handle when upload button is clicked.","    uploadBtn.onclick = function() {","        // Trigger error if no recording has been made.","        if (!player.src || chunks === []) {","            return window.alert(M.util.get_string('norecordingfound', 'tinymce_recordrtc'));","        } else {","            var btn = uploadBtn;","            btn.disabled = true;","","            // Upload recording to server.","            Y.M.atto_recordrtc.uploadToServer(recType, function(progress, fileURLOrError) {","                if (progress === 'ended') { // Insert annotation in text.","                    btn.disabled = false;","                    Y.M.atto_recordrtc.insert_annotation(recType, fileURLOrError);","                } else if (progress === 'upload-failed') { // Show error message in upload button.","                    btn.disabled = false;","                    btn.textContent = M.util.get_string('uploadfailed', 'tinymce_recordrtc') + ' ' + fileURLOrError;","                } else if (progress === 'upload-failed-404') { // 404 error = File too large in Moodle.","                    btn.disabled = false;","                    btn.textContent = M.util.get_string('uploadfailed404', 'tinymce_recordrtc');","                } else if (progress === 'upload-aborted') {","                    btn.disabled = false;","                    btn.textContent = M.util.get_string('uploadaborted', 'tinymce_recordrtc') + ' ' + fileURLOrError;","                } else {","                    btn.textContent = progress;","                }","            });","","            return undefined;","        }","    };","};","","","}, '@VERSION@', {\"requires\": [\"moodle-atto_recordrtc-commonmodule\"]});","","}());"]};
}
var __cov_PaATcEkh9uBkQslWgZGUhw = __coverage__['build/moodle-atto_recordrtc-audiomodule/moodle-atto_recordrtc-audiomodule.js'];
__cov_PaATcEkh9uBkQslWgZGUhw.s['1']++;YUI.add('moodle-atto_recordrtc-audiomodule',function(Y,NAME){__cov_PaATcEkh9uBkQslWgZGUhw.f['1']++;__cov_PaATcEkh9uBkQslWgZGUhw.s['2']++;Y.M.atto_recordrtc.view_init=function(){__cov_PaATcEkh9uBkQslWgZGUhw.f['2']++;__cov_PaATcEkh9uBkQslWgZGUhw.s['3']++;player=document.querySelector('audio#player');__cov_PaATcEkh9uBkQslWgZGUhw.s['4']++;startStopBtn=document.querySelector('button#start-stop');__cov_PaATcEkh9uBkQslWgZGUhw.s['5']++;uploadBtn=document.querySelector('button#upload');__cov_PaATcEkh9uBkQslWgZGUhw.s['6']++;recType='audio';__cov_PaATcEkh9uBkQslWgZGUhw.s['7']++;maxUploadSize=parseInt(recordrtc.maxfilesize.match(/\d+/)[0])*Math.pow(1024,2);__cov_PaATcEkh9uBkQslWgZGUhw.s['8']++;Y.M.atto_recordrtc.check_secure();__cov_PaATcEkh9uBkQslWgZGUhw.s['9']++;Y.M.atto_recordrtc.check_browser();__cov_PaATcEkh9uBkQslWgZGUhw.s['10']++;startStopBtn.onclick=function(){__cov_PaATcEkh9uBkQslWgZGUhw.f['3']++;__cov_PaATcEkh9uBkQslWgZGUhw.s['11']++;var btn=this;__cov_PaATcEkh9uBkQslWgZGUhw.s['12']++;btn.disabled=true;__cov_PaATcEkh9uBkQslWgZGUhw.s['13']++;if((__cov_PaATcEkh9uBkQslWgZGUhw.b['2'][0]++,btn.textContent===M.util.get_string('startrecording','tinymce_recordrtc'))||(__cov_PaATcEkh9uBkQslWgZGUhw.b['2'][1]++,btn.textContent===M.util.get_string('recordagain','tinymce_recordrtc'))||(__cov_PaATcEkh9uBkQslWgZGUhw.b['2'][2]++,btn.textContent===M.util.get_string('recordingfailed','tinymce_recordrtc'))){__cov_PaATcEkh9uBkQslWgZGUhw.b['1'][0]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['14']++;var alert=document.querySelector('div[id=alert-danger]');__cov_PaATcEkh9uBkQslWgZGUhw.s['15']++;alert.parentElement.parentElement.classList.add('hide');__cov_PaATcEkh9uBkQslWgZGUhw.s['16']++;player.parentElement.parentElement.classList.add('hide');__cov_PaATcEkh9uBkQslWgZGUhw.s['17']++;uploadBtn.parentElement.parentElement.classList.add('hide');__cov_PaATcEkh9uBkQslWgZGUhw.s['18']++;if(!recordrtc.oldermoodle){__cov_PaATcEkh9uBkQslWgZGUhw.b['3'][0]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['19']++;startStopBtn.classList.remove('btn-outline-danger');__cov_PaATcEkh9uBkQslWgZGUhw.s['20']++;startStopBtn.classList.add('btn-danger');}else{__cov_PaATcEkh9uBkQslWgZGUhw.b['3'][1]++;}__cov_PaATcEkh9uBkQslWgZGUhw.s['21']++;chunks=[];__cov_PaATcEkh9uBkQslWgZGUhw.s['22']++;blobSize=0;__cov_PaATcEkh9uBkQslWgZGUhw.s['23']++;var commonConfig={onMediaCaptured:function(stream){__cov_PaATcEkh9uBkQslWgZGUhw.f['4']++;__cov_PaATcEkh9uBkQslWgZGUhw.s['24']++;btn.stream=stream;__cov_PaATcEkh9uBkQslWgZGUhw.s['25']++;if(btn.mediaCapturedCallback){__cov_PaATcEkh9uBkQslWgZGUhw.b['4'][0]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['26']++;btn.mediaCapturedCallback();}else{__cov_PaATcEkh9uBkQslWgZGUhw.b['4'][1]++;}},onMediaStopped:function(btnLabel){__cov_PaATcEkh9uBkQslWgZGUhw.f['5']++;__cov_PaATcEkh9uBkQslWgZGUhw.s['27']++;btn.textContent=btnLabel;},onMediaCapturingFailed:function(error){__cov_PaATcEkh9uBkQslWgZGUhw.f['6']++;__cov_PaATcEkh9uBkQslWgZGUhw.s['28']++;var btnLabel=null;__cov_PaATcEkh9uBkQslWgZGUhw.s['29']++;if((__cov_PaATcEkh9uBkQslWgZGUhw.b['6'][0]++,error.name==='PermissionDeniedError')&&(__cov_PaATcEkh9uBkQslWgZGUhw.b['6'][1]++,bowser.firefox)){__cov_PaATcEkh9uBkQslWgZGUhw.b['5'][0]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['30']++;InstallTrigger.install({'Foo':{URL:'https://addons.mozilla.org/en-US/firefox/addon/enable-screen-capturing/',toString:function(){__cov_PaATcEkh9uBkQslWgZGUhw.f['7']++;__cov_PaATcEkh9uBkQslWgZGUhw.s['31']++;return this.URL;}}});__cov_PaATcEkh9uBkQslWgZGUhw.s['32']++;btnLabel=M.util.get_string('startrecording','tinymce_recordrtc');}else{__cov_PaATcEkh9uBkQslWgZGUhw.b['5'][1]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['33']++;if((__cov_PaATcEkh9uBkQslWgZGUhw.b['8'][0]++,error.name==='DevicesNotFoundError')||(__cov_PaATcEkh9uBkQslWgZGUhw.b['8'][1]++,error.name==='NotFoundError')){__cov_PaATcEkh9uBkQslWgZGUhw.b['7'][0]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['34']++;var alert=document.querySelector('div[id=alert-danger]');__cov_PaATcEkh9uBkQslWgZGUhw.s['35']++;alert.parentElement.parentElement.classList.remove('hide');__cov_PaATcEkh9uBkQslWgZGUhw.s['36']++;alert.textContent=M.util.get_string('inputdevicealert_title','tinymce_recordrtc')+' '+M.util.get_string('inputdevicealert','tinymce_recordrtc');__cov_PaATcEkh9uBkQslWgZGUhw.s['37']++;btnLabel=M.util.get_string('recordingfailed','tinymce_recordrtc');}else{__cov_PaATcEkh9uBkQslWgZGUhw.b['7'][1]++;}}__cov_PaATcEkh9uBkQslWgZGUhw.s['38']++;commonConfig.onMediaStopped(btnLabel);}};__cov_PaATcEkh9uBkQslWgZGUhw.s['39']++;Y.M.atto_recordrtc.captureAudio(commonConfig);__cov_PaATcEkh9uBkQslWgZGUhw.s['40']++;btn.mediaCapturedCallback=function(){__cov_PaATcEkh9uBkQslWgZGUhw.f['8']++;__cov_PaATcEkh9uBkQslWgZGUhw.s['41']++;Y.M.atto_recordrtc.startRecording(recType,btn.stream);};}else{__cov_PaATcEkh9uBkQslWgZGUhw.b['1'][1]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['42']++;clearInterval(countdownTicker);__cov_PaATcEkh9uBkQslWgZGUhw.s['43']++;setTimeout(function(){__cov_PaATcEkh9uBkQslWgZGUhw.f['9']++;__cov_PaATcEkh9uBkQslWgZGUhw.s['44']++;btn.disabled=false;},1000);__cov_PaATcEkh9uBkQslWgZGUhw.s['45']++;Y.M.atto_recordrtc.stopRecording(btn.stream);__cov_PaATcEkh9uBkQslWgZGUhw.s['46']++;btn.textContent=M.util.get_string('recordagain','tinymce_recordrtc');__cov_PaATcEkh9uBkQslWgZGUhw.s['47']++;if(!recordrtc.oldermoodle){__cov_PaATcEkh9uBkQslWgZGUhw.b['9'][0]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['48']++;startStopBtn.classList.remove('btn-danger');__cov_PaATcEkh9uBkQslWgZGUhw.s['49']++;startStopBtn.classList.add('btn-outline-danger');}else{__cov_PaATcEkh9uBkQslWgZGUhw.b['9'][1]++;}}};};__cov_PaATcEkh9uBkQslWgZGUhw.s['50']++;Y.M.atto_recordrtc.captureAudio=function(config){__cov_PaATcEkh9uBkQslWgZGUhw.f['10']++;__cov_PaATcEkh9uBkQslWgZGUhw.s['51']++;Y.M.atto_recordrtc.captureUserMedia({audio:true},function(audioStream){__cov_PaATcEkh9uBkQslWgZGUhw.f['11']++;__cov_PaATcEkh9uBkQslWgZGUhw.s['52']++;player.srcObject=audioStream;__cov_PaATcEkh9uBkQslWgZGUhw.s['53']++;config.onMediaCaptured(audioStream);},function(error){__cov_PaATcEkh9uBkQslWgZGUhw.f['12']++;__cov_PaATcEkh9uBkQslWgZGUhw.s['54']++;config.onMediaCapturingFailed(error);});};__cov_PaATcEkh9uBkQslWgZGUhw.s['55']++;Y.M.atto_recordrtc.stopRecording=function(stream){__cov_PaATcEkh9uBkQslWgZGUhw.f['13']++;__cov_PaATcEkh9uBkQslWgZGUhw.s['56']++;mediaRecorder.stop();__cov_PaATcEkh9uBkQslWgZGUhw.s['57']++;stream.getTracks().forEach(function(track){__cov_PaATcEkh9uBkQslWgZGUhw.f['14']++;__cov_PaATcEkh9uBkQslWgZGUhw.s['58']++;track.stop();});__cov_PaATcEkh9uBkQslWgZGUhw.s['59']++;var blob=new Blob(chunks);__cov_PaATcEkh9uBkQslWgZGUhw.s['60']++;player.src=URL.createObjectURL(blob);__cov_PaATcEkh9uBkQslWgZGUhw.s['61']++;player.muted=false;__cov_PaATcEkh9uBkQslWgZGUhw.s['62']++;player.controls=true;__cov_PaATcEkh9uBkQslWgZGUhw.s['63']++;player.parentElement.parentElement.classList.remove('hide');__cov_PaATcEkh9uBkQslWgZGUhw.s['64']++;uploadBtn.parentElement.parentElement.classList.remove('hide');__cov_PaATcEkh9uBkQslWgZGUhw.s['65']++;uploadBtn.textContent=M.util.get_string('attachrecording','tinymce_recordrtc');__cov_PaATcEkh9uBkQslWgZGUhw.s['66']++;uploadBtn.disabled=false;__cov_PaATcEkh9uBkQslWgZGUhw.s['67']++;uploadBtn.onclick=function(){__cov_PaATcEkh9uBkQslWgZGUhw.f['15']++;__cov_PaATcEkh9uBkQslWgZGUhw.s['68']++;if((__cov_PaATcEkh9uBkQslWgZGUhw.b['11'][0]++,!player.src)||(__cov_PaATcEkh9uBkQslWgZGUhw.b['11'][1]++,chunks===[])){__cov_PaATcEkh9uBkQslWgZGUhw.b['10'][0]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['69']++;return window.alert(M.util.get_string('norecordingfound','tinymce_recordrtc'));}else{__cov_PaATcEkh9uBkQslWgZGUhw.b['10'][1]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['70']++;var btn=uploadBtn;__cov_PaATcEkh9uBkQslWgZGUhw.s['71']++;btn.disabled=true;__cov_PaATcEkh9uBkQslWgZGUhw.s['72']++;Y.M.atto_recordrtc.uploadToServer(recType,function(progress,fileURLOrError){__cov_PaATcEkh9uBkQslWgZGUhw.f['16']++;__cov_PaATcEkh9uBkQslWgZGUhw.s['73']++;if(progress==='ended'){__cov_PaATcEkh9uBkQslWgZGUhw.b['12'][0]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['74']++;btn.disabled=false;__cov_PaATcEkh9uBkQslWgZGUhw.s['75']++;Y.M.atto_recordrtc.insert_annotation(recType,fileURLOrError);}else{__cov_PaATcEkh9uBkQslWgZGUhw.b['12'][1]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['76']++;if(progress==='upload-failed'){__cov_PaATcEkh9uBkQslWgZGUhw.b['13'][0]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['77']++;btn.disabled=false;__cov_PaATcEkh9uBkQslWgZGUhw.s['78']++;btn.textContent=M.util.get_string('uploadfailed','tinymce_recordrtc')+' '+fileURLOrError;}else{__cov_PaATcEkh9uBkQslWgZGUhw.b['13'][1]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['79']++;if(progress==='upload-failed-404'){__cov_PaATcEkh9uBkQslWgZGUhw.b['14'][0]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['80']++;btn.disabled=false;__cov_PaATcEkh9uBkQslWgZGUhw.s['81']++;btn.textContent=M.util.get_string('uploadfailed404','tinymce_recordrtc');}else{__cov_PaATcEkh9uBkQslWgZGUhw.b['14'][1]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['82']++;if(progress==='upload-aborted'){__cov_PaATcEkh9uBkQslWgZGUhw.b['15'][0]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['83']++;btn.disabled=false;__cov_PaATcEkh9uBkQslWgZGUhw.s['84']++;btn.textContent=M.util.get_string('uploadaborted','tinymce_recordrtc')+' '+fileURLOrError;}else{__cov_PaATcEkh9uBkQslWgZGUhw.b['15'][1]++;__cov_PaATcEkh9uBkQslWgZGUhw.s['85']++;btn.textContent=progress;}}}}});__cov_PaATcEkh9uBkQslWgZGUhw.s['86']++;return undefined;}};};},'@VERSION@',{'requires':['moodle-atto_recordrtc-commonmodule']});
