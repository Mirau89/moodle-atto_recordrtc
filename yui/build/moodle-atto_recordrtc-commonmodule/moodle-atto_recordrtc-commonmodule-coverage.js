if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/moodle-atto_recordrtc-commonmodule/moodle-atto_recordrtc-commonmodule.js']) {
   __coverage__['build/moodle-atto_recordrtc-commonmodule/moodle-atto_recordrtc-commonmodule.js'] = {"path":"build/moodle-atto_recordrtc-commonmodule/moodle-atto_recordrtc-commonmodule.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0,0,0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":46},"end":{"line":1,"column":65}}},"2":{"name":"(anonymous_2)","line":18,"loc":{"start":{"line":18,"column":1},"end":{"line":18,"column":12}}},"3":{"name":"(anonymous_3)","line":22,"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":24}}},"4":{"name":"(anonymous_4)","line":53,"loc":{"start":{"line":53,"column":35},"end":{"line":53,"column":46}}},"5":{"name":"(anonymous_5)","line":67,"loc":{"start":{"line":67,"column":36},"end":{"line":67,"column":47}}},"6":{"name":"(anonymous_6)","line":77,"loc":{"start":{"line":77,"column":39},"end":{"line":77,"column":98}}},"7":{"name":"(anonymous_7)","line":82,"loc":{"start":{"line":82,"column":42},"end":{"line":82,"column":58}}},"8":{"name":"(anonymous_8)","line":102,"loc":{"start":{"line":102,"column":37},"end":{"line":102,"column":60}}},"9":{"name":"(anonymous_9)","line":162,"loc":{"start":{"line":162,"column":37},"end":{"line":162,"column":62}}},"10":{"name":"(anonymous_10)","line":169,"loc":{"start":{"line":169,"column":17},"end":{"line":169,"column":28}}},"11":{"name":"(anonymous_11)","line":190,"loc":{"start":{"line":190,"column":73},"end":{"line":190,"column":106}}},"12":{"name":"(anonymous_12)","line":205,"loc":{"start":{"line":205,"column":41},"end":{"line":205,"column":71}}},"13":{"name":"(anonymous_13)","line":208,"loc":{"start":{"line":208,"column":29},"end":{"line":208,"column":40}}},"14":{"name":"(anonymous_14)","line":216,"loc":{"start":{"line":216,"column":28},"end":{"line":216,"column":44}}},"15":{"name":"(anonymous_15)","line":220,"loc":{"start":{"line":220,"column":25},"end":{"line":220,"column":41}}},"16":{"name":"(anonymous_16)","line":224,"loc":{"start":{"line":224,"column":25},"end":{"line":224,"column":41}}},"17":{"name":"(anonymous_17)","line":234,"loc":{"start":{"line":234,"column":26},"end":{"line":234,"column":40}}},"18":{"name":"(anonymous_18)","line":246,"loc":{"start":{"line":246,"column":30},"end":{"line":246,"column":41}}},"19":{"name":"(anonymous_19)","line":258,"loc":{"start":{"line":258,"column":40},"end":{"line":258,"column":70}}},"20":{"name":"(anonymous_20)","line":272,"loc":{"start":{"line":272,"column":40},"end":{"line":272,"column":70}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":286,"column":34}},"2":{"start":{"line":15,"column":0},"end":{"line":15,"column":48}},"3":{"start":{"line":18,"column":0},"end":{"line":38,"column":5}},"4":{"start":{"line":19,"column":4},"end":{"line":19,"column":20}},"5":{"start":{"line":20,"column":4},"end":{"line":20,"column":33}},"6":{"start":{"line":22,"column":4},"end":{"line":24,"column":6}},"7":{"start":{"line":23,"column":8},"end":{"line":23,"column":57}},"8":{"start":{"line":26,"column":4},"end":{"line":26,"column":40}},"9":{"start":{"line":27,"column":4},"end":{"line":27,"column":44}},"10":{"start":{"line":28,"column":4},"end":{"line":35,"column":5}},"11":{"start":{"line":29,"column":8},"end":{"line":29,"column":42}},"12":{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},"13":{"start":{"line":32,"column":12},"end":{"line":32,"column":72}},"14":{"start":{"line":34,"column":8},"end":{"line":34,"column":44}},"15":{"start":{"line":37,"column":4},"end":{"line":37,"column":27}},"16":{"start":{"line":41,"column":0},"end":{"line":41,"column":18}},"17":{"start":{"line":42,"column":0},"end":{"line":42,"column":24}},"18":{"start":{"line":43,"column":0},"end":{"line":43,"column":21}},"19":{"start":{"line":44,"column":0},"end":{"line":44,"column":28}},"20":{"start":{"line":45,"column":0},"end":{"line":45,"column":27}},"21":{"start":{"line":46,"column":0},"end":{"line":46,"column":19}},"22":{"start":{"line":47,"column":0},"end":{"line":47,"column":25}},"23":{"start":{"line":48,"column":0},"end":{"line":48,"column":18}},"24":{"start":{"line":49,"column":0},"end":{"line":49,"column":20}},"25":{"start":{"line":50,"column":0},"end":{"line":50,"column":25}},"26":{"start":{"line":53,"column":0},"end":{"line":67,"column":0}},"27":{"start":{"line":54,"column":4},"end":{"line":55,"column":76}},"28":{"start":{"line":57,"column":4},"end":{"line":60,"column":5}},"29":{"start":{"line":58,"column":8},"end":{"line":58,"column":78}},"30":{"start":{"line":59,"column":8},"end":{"line":59,"column":29}},"31":{"start":{"line":67,"column":0},"end":{"line":74,"column":2}},"32":{"start":{"line":68,"column":4},"end":{"line":73,"column":5}},"33":{"start":{"line":71,"column":8},"end":{"line":71,"column":68}},"34":{"start":{"line":72,"column":8},"end":{"line":72,"column":67}},"35":{"start":{"line":77,"column":0},"end":{"line":79,"column":2}},"36":{"start":{"line":78,"column":4},"end":{"line":78,"column":101}},"37":{"start":{"line":82,"column":0},"end":{"line":99,"column":2}},"38":{"start":{"line":84,"column":4},"end":{"line":84,"column":32}},"39":{"start":{"line":89,"column":4},"end":{"line":98,"column":5}},"40":{"start":{"line":90,"column":8},"end":{"line":90,"column":48}},"41":{"start":{"line":92,"column":8},"end":{"line":92,"column":29}},"42":{"start":{"line":93,"column":8},"end":{"line":93,"column":79}},"43":{"start":{"line":94,"column":11},"end":{"line":98,"column":5}},"44":{"start":{"line":95,"column":8},"end":{"line":95,"column":43}},"45":{"start":{"line":97,"column":8},"end":{"line":97,"column":32}},"46":{"start":{"line":102,"column":0},"end":{"line":159,"column":2}},"47":{"start":{"line":104,"column":4},"end":{"line":104,"column":23}},"48":{"start":{"line":105,"column":4},"end":{"line":137,"column":5}},"49":{"start":{"line":106,"column":8},"end":{"line":116,"column":9}},"50":{"start":{"line":107,"column":12},"end":{"line":110,"column":14}},"51":{"start":{"line":111,"column":15},"end":{"line":116,"column":9}},"52":{"start":{"line":112,"column":12},"end":{"line":115,"column":14}},"53":{"start":{"line":118,"column":8},"end":{"line":136,"column":9}},"54":{"start":{"line":119,"column":12},"end":{"line":123,"column":14}},"55":{"start":{"line":124,"column":15},"end":{"line":136,"column":9}},"56":{"start":{"line":125,"column":12},"end":{"line":129,"column":14}},"57":{"start":{"line":130,"column":15},"end":{"line":136,"column":9}},"58":{"start":{"line":131,"column":12},"end":{"line":135,"column":14}},"59":{"start":{"line":140,"column":4},"end":{"line":141,"column":65}},"60":{"start":{"line":144,"column":4},"end":{"line":144,"column":76}},"61":{"start":{"line":145,"column":4},"end":{"line":145,"column":30}},"62":{"start":{"line":148,"column":4},"end":{"line":148,"column":24}},"63":{"start":{"line":151,"column":4},"end":{"line":151,"column":43}},"64":{"start":{"line":152,"column":4},"end":{"line":152,"column":23}},"65":{"start":{"line":153,"column":4},"end":{"line":153,"column":146}},"66":{"start":{"line":154,"column":4},"end":{"line":154,"column":34}},"67":{"start":{"line":155,"column":4},"end":{"line":155,"column":69}},"68":{"start":{"line":158,"column":4},"end":{"line":158,"column":34}},"69":{"start":{"line":162,"column":0},"end":{"line":202,"column":2}},"70":{"start":{"line":163,"column":4},"end":{"line":163,"column":35}},"71":{"start":{"line":166,"column":4},"end":{"line":166,"column":38}},"72":{"start":{"line":167,"column":4},"end":{"line":167,"column":30}},"73":{"start":{"line":169,"column":4},"end":{"line":199,"column":6}},"74":{"start":{"line":170,"column":8},"end":{"line":198,"column":9}},"75":{"start":{"line":172,"column":12},"end":{"line":172,"column":37}},"76":{"start":{"line":175,"column":12},"end":{"line":175,"column":78}},"77":{"start":{"line":176,"column":12},"end":{"line":180,"column":13}},"78":{"start":{"line":177,"column":16},"end":{"line":177,"column":41}},"79":{"start":{"line":179,"column":16},"end":{"line":179,"column":42}},"80":{"start":{"line":183,"column":12},"end":{"line":183,"column":42}},"81":{"start":{"line":184,"column":12},"end":{"line":184,"column":62}},"82":{"start":{"line":185,"column":12},"end":{"line":185,"column":61}},"83":{"start":{"line":186,"column":12},"end":{"line":186,"column":58}},"84":{"start":{"line":187,"column":12},"end":{"line":187,"column":50}},"85":{"start":{"line":190,"column":12},"end":{"line":197,"column":15}},"86":{"start":{"line":191,"column":16},"end":{"line":196,"column":17}},"87":{"start":{"line":192,"column":20},"end":{"line":192,"column":112}},"88":{"start":{"line":193,"column":20},"end":{"line":193,"column":65}},"89":{"start":{"line":195,"column":20},"end":{"line":195,"column":39}},"90":{"start":{"line":201,"column":4},"end":{"line":201,"column":15}},"91":{"start":{"line":205,"column":0},"end":{"line":231,"column":2}},"92":{"start":{"line":206,"column":4},"end":{"line":206,"column":35}},"93":{"start":{"line":208,"column":4},"end":{"line":214,"column":6}},"94":{"start":{"line":209,"column":8},"end":{"line":213,"column":9}},"95":{"start":{"line":210,"column":12},"end":{"line":210,"column":55}},"96":{"start":{"line":211,"column":15},"end":{"line":213,"column":9}},"97":{"start":{"line":212,"column":12},"end":{"line":212,"column":42}},"98":{"start":{"line":216,"column":4},"end":{"line":218,"column":6}},"99":{"start":{"line":217,"column":8},"end":{"line":217,"column":129}},"100":{"start":{"line":220,"column":4},"end":{"line":222,"column":6}},"101":{"start":{"line":221,"column":8},"end":{"line":221,"column":41}},"102":{"start":{"line":224,"column":4},"end":{"line":226,"column":6}},"103":{"start":{"line":225,"column":8},"end":{"line":225,"column":42}},"104":{"start":{"line":229,"column":4},"end":{"line":229,"column":26}},"105":{"start":{"line":230,"column":4},"end":{"line":230,"column":19}},"106":{"start":{"line":234,"column":0},"end":{"line":242,"column":2}},"107":{"start":{"line":235,"column":4},"end":{"line":235,"column":29}},"108":{"start":{"line":237,"column":4},"end":{"line":241,"column":5}},"109":{"start":{"line":238,"column":8},"end":{"line":238,"column":31}},"110":{"start":{"line":240,"column":8},"end":{"line":240,"column":25}},"111":{"start":{"line":246,"column":0},"end":{"line":255,"column":2}},"112":{"start":{"line":247,"column":4},"end":{"line":247,"column":23}},"113":{"start":{"line":249,"column":4},"end":{"line":249,"column":108}},"114":{"start":{"line":250,"column":4},"end":{"line":250,"column":118}},"115":{"start":{"line":252,"column":4},"end":{"line":254,"column":5}},"116":{"start":{"line":253,"column":8},"end":{"line":253,"column":29}},"117":{"start":{"line":258,"column":0},"end":{"line":269,"column":2}},"118":{"start":{"line":259,"column":4},"end":{"line":260,"column":95}},"119":{"start":{"line":263,"column":4},"end":{"line":268,"column":5}},"120":{"start":{"line":264,"column":8},"end":{"line":264,"column":25}},"121":{"start":{"line":266,"column":8},"end":{"line":266,"column":153}},"122":{"start":{"line":267,"column":8},"end":{"line":267,"column":26}},"123":{"start":{"line":272,"column":0},"end":{"line":283,"column":2}},"124":{"start":{"line":273,"column":4},"end":{"line":273,"column":80}},"125":{"start":{"line":277,"column":4},"end":{"line":282,"column":5}},"126":{"start":{"line":278,"column":8},"end":{"line":278,"column":90}},"127":{"start":{"line":280,"column":8},"end":{"line":280,"column":79}},"128":{"start":{"line":281,"column":8},"end":{"line":281,"column":29}}},"branchMap":{"1":{"line":15,"type":"binary-expr","locations":[{"start":{"line":15,"column":22},"end":{"line":15,"column":41}},{"start":{"line":15,"column":45},"end":{"line":15,"column":47}}]},"2":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":31,"column":8}},{"start":{"line":31,"column":8},"end":{"line":31,"column":8}}]},"3":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":12},"end":{"line":31,"column":34}},{"start":{"line":31,"column":38},"end":{"line":31,"column":61}}]},"4":{"line":32,"type":"cond-expr","locations":[{"start":{"line":32,"column":59},"end":{"line":32,"column":63}},{"start":{"line":32,"column":66},"end":{"line":32,"column":71}}]},"5":{"line":54,"type":"binary-expr","locations":[{"start":{"line":54,"column":26},"end":{"line":54,"column":63}},{"start":{"line":55,"column":26},"end":{"line":55,"column":74}}]},"6":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":4},"end":{"line":57,"column":4}},{"start":{"line":57,"column":4},"end":{"line":57,"column":4}}]},"7":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":4},"end":{"line":68,"column":4}},{"start":{"line":68,"column":4},"end":{"line":68,"column":4}}]},"8":{"line":68,"type":"binary-expr","locations":[{"start":{"line":68,"column":11},"end":{"line":68,"column":25}},{"start":{"line":68,"column":29},"end":{"line":68,"column":49}},{"start":{"line":69,"column":11},"end":{"line":69,"column":24}},{"start":{"line":69,"column":28},"end":{"line":69,"column":48}},{"start":{"line":70,"column":11},"end":{"line":70,"column":23}},{"start":{"line":70,"column":27},"end":{"line":70,"column":47}}]},"9":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":4},"end":{"line":89,"column":4}},{"start":{"line":89,"column":4},"end":{"line":89,"column":4}}]},"10":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":9},"end":{"line":89,"column":34}},{"start":{"line":89,"column":40},"end":{"line":89,"column":72}}]},"11":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":11},"end":{"line":94,"column":11}},{"start":{"line":94,"column":11},"end":{"line":94,"column":11}}]},"12":{"line":94,"type":"binary-expr","locations":[{"start":{"line":94,"column":16},"end":{"line":94,"column":41}},{"start":{"line":94,"column":47},"end":{"line":94,"column":89}}]},"13":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":4},"end":{"line":105,"column":4}},{"start":{"line":105,"column":4},"end":{"line":105,"column":4}}]},"14":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":8},"end":{"line":106,"column":8}},{"start":{"line":106,"column":8},"end":{"line":106,"column":8}}]},"15":{"line":111,"type":"if","locations":[{"start":{"line":111,"column":15},"end":{"line":111,"column":15}},{"start":{"line":111,"column":15},"end":{"line":111,"column":15}}]},"16":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":8},"end":{"line":118,"column":8}},{"start":{"line":118,"column":8},"end":{"line":118,"column":8}}]},"17":{"line":124,"type":"if","locations":[{"start":{"line":124,"column":15},"end":{"line":124,"column":15}},{"start":{"line":124,"column":15},"end":{"line":124,"column":15}}]},"18":{"line":130,"type":"if","locations":[{"start":{"line":130,"column":15},"end":{"line":130,"column":15}},{"start":{"line":130,"column":15},"end":{"line":130,"column":15}}]},"19":{"line":140,"type":"cond-expr","locations":[{"start":{"line":140,"column":30},"end":{"line":140,"column":55}},{"start":{"line":141,"column":30},"end":{"line":141,"column":64}}]},"20":{"line":170,"type":"if","locations":[{"start":{"line":170,"column":8},"end":{"line":170,"column":8}},{"start":{"line":170,"column":8},"end":{"line":170,"column":8}}]},"21":{"line":176,"type":"if","locations":[{"start":{"line":176,"column":12},"end":{"line":176,"column":12}},{"start":{"line":176,"column":12},"end":{"line":176,"column":12}}]},"22":{"line":191,"type":"if","locations":[{"start":{"line":191,"column":16},"end":{"line":191,"column":16}},{"start":{"line":191,"column":16},"end":{"line":191,"column":16}}]},"23":{"line":209,"type":"if","locations":[{"start":{"line":209,"column":8},"end":{"line":209,"column":8}},{"start":{"line":209,"column":8},"end":{"line":209,"column":8}}]},"24":{"line":209,"type":"binary-expr","locations":[{"start":{"line":209,"column":13},"end":{"line":209,"column":33}},{"start":{"line":209,"column":39},"end":{"line":209,"column":57}}]},"25":{"line":211,"type":"if","locations":[{"start":{"line":211,"column":15},"end":{"line":211,"column":15}},{"start":{"line":211,"column":15},"end":{"line":211,"column":15}}]},"26":{"line":237,"type":"if","locations":[{"start":{"line":237,"column":4},"end":{"line":237,"column":4}},{"start":{"line":237,"column":4},"end":{"line":237,"column":4}}]},"27":{"line":252,"type":"if","locations":[{"start":{"line":252,"column":4},"end":{"line":252,"column":4}},{"start":{"line":252,"column":4},"end":{"line":252,"column":4}}]},"28":{"line":263,"type":"if","locations":[{"start":{"line":263,"column":4},"end":{"line":263,"column":4}},{"start":{"line":263,"column":4},"end":{"line":263,"column":4}}]},"29":{"line":277,"type":"if","locations":[{"start":{"line":277,"column":4},"end":{"line":277,"column":4}},{"start":{"line":277,"column":4},"end":{"line":277,"column":4}}]}},"code":["(function () { YUI.add('moodle-atto_recordrtc-commonmodule', function (Y, NAME) {","","// TinyMCE recordrtc library functions.","// @package    tinymce_recordrtc.","// @author     Jesus Federico  (jesus [at] blindsidenetworks [dt] com).","// @copyright  2016 to present, Blindside Networks Inc.","// @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later.","","/** global: M */","/** global: tinyMCEPopup */","/** global: bowser */","/** global: params */","/** global: recordrtc */","","M.tinymce_recordrtc = M.tinymce_recordrtc || {};","","// Extract plugin settings to params hash.","(function() {","    var params = {};","    var r = /([^&=]+)=?([^&]*)/g;","","    var d = function(s) {","        return decodeURIComponent(s.replace(/\\+/g, ' '));","    };","","    var search = window.location.search;","    var match = r.exec(search.substring(1));","    while (match) {","        params[d(match[1])] = d(match[2]);","","        if (d(match[2]) === 'true' || d(match[2]) === 'false') {","            params[d(match[1])] = d(match[2]) === 'true' ? true : false;","        }","        match = r.exec(search.substring(1));","    }","","    window.params = params;","})();","","// Initialize some variables.","var player = null;","var startStopBtn = null;","var uploadBtn = null;","var countdownSeconds = null;","var countdownTicker = null;","var recType = null;","var mediaRecorder = null;","var chunks = null;","var blobSize = null;","var maxUploadSize = null;","","// Notify and redirect user if plugin is used from insecure location.","M.tinymce_recordrtc.check_secure = function() {","    var isSecureOrigin = (window.location.protocol === 'https:') ||","                         (window.location.host.indexOf('localhost') !== -1);","","    if (!isSecureOrigin) {","        window.alert(M.util.get_string('insecurealert', 'tinymce_recordrtc'));","        tinyMCEPopup.close();","    }","}","","// Display \"consider switching browsers\" message if not using:","// - Firefox 29+;","// - Chrome 49+;","// - Opera 36+.","M.tinymce_recordrtc.check_browser = function() {","    if (!((bowser.firefox && bowser.version >= 29) ||","          (bowser.chrome && bowser.version >= 49) ||","          (bowser.opera && bowser.version >= 36))) {","        var alert = document.querySelector('div[id=alert-warning]');","        alert.parentElement.parentElement.classList.remove('hide');","    }","};","","// Capture webcam/microphone stream.","M.tinymce_recordrtc.captureUserMedia = function(mediaConstraints, successCallback, errorCallback) {","    navigator.mediaDevices.getUserMedia(mediaConstraints).then(successCallback).catch(errorCallback);","};","","// Add chunks of audio/video to array when made available.","M.tinymce_recordrtc.handleDataAvailable = function(event) {","    // Size of all recorded data so far.","    blobSize += event.data.size;","","    // Push recording slice to array.","    // If total size of recording so far exceeds max upload limit, stop recording.","    // An extra condition exists to avoid displaying alert twice.","    if ((blobSize >= maxUploadSize) && (!localStorage.getItem('alerted'))) {","        localStorage.setItem('alerted', 'true');","","        startStopBtn.click();","        window.alert(M.util.get_string('nearingmaxsize', 'tinymce_recordrtc'));","    } else if ((blobSize >= maxUploadSize) && (localStorage.getItem('alerted') === 'true')) {","        localStorage.removeItem('alerted');","    } else {","        chunks.push(event.data);","    }","};","","// Get everything set up to start recording.","M.tinymce_recordrtc.startRecording = function(type, stream) {","    // The options for the recording codecs and bitrates.","    var options = null;","    if (type === 'audio') {","        if (MediaRecorder.isTypeSupported('audio/webm;codecs=opus')) {","            options = {","                audioBitsPerSecond: params['audiobitrate'],","                mimeType: 'audio/webm;codecs=opus'","            };","        } else if (MediaRecorder.isTypeSupported('audio/ogg;codecs=opus')) {","            options = {","                audioBitsPerSecond: params['audiobitrate'],","                mimeType: 'audio/ogg;codecs=opus'","            };","        }","    } else {","        if (MediaRecorder.isTypeSupported('video/webm;codecs=vp9,opus')) {","            options = {","                audioBitsPerSecond: params['audiobitrate'],","                videoBitsPerSecond: params['videobitrate'],","                mimeType: 'video/webm;codecs=vp9,opus'","            };","        } else if (MediaRecorder.isTypeSupported('video/webm;codecs=h264,opus')) {","            options = {","                audioBitsPerSecond: params['audiobitrate'],","                videoBitsPerSecond: params['videobitrate'],","                mimeType: 'video/webm;codecs=h264,opus'","            };","        } else if (MediaRecorder.isTypeSupported('video/webm;codecs=vp8,opus')) {","            options = {","                audioBitsPerSecond: params['audiobitrate'],","                videoBitsPerSecond: params['videobitrate'],","                mimeType: 'video/webm;codecs=vp8,opus'","            };","        }","    }","","    // If none of the options above are supported, fall back on browser defaults.","    mediaRecorder = options ? new MediaRecorder(stream)","                            : new MediaRecorder(stream, options);","","    // Initialize MediaRecorder events and start recording.","    mediaRecorder.ondataavailable = M.tinymce_recordrtc.handleDataAvailable;","    mediaRecorder.start(1000); // Capture in 10ms chunks. Must be set to work with Firefox.","","    // Mute audio, distracting while recording.","    player.muted = true;","","    // Set recording timer to the time specified in the settings.","    countdownSeconds = params['timelimit'];","    countdownSeconds++;","    startStopBtn.innerHTML = M.util.get_string('stoprecording', 'tinymce_recordrtc') + ' (<span id=\"minutes\"></span>:<span id=\"seconds\"></span>)';","    M.tinymce_recordrtc.setTime();","    countdownTicker = setInterval(M.tinymce_recordrtc.setTime, 1000);","","    // Make button clickable again, to allow stopping recording.","    startStopBtn.disabled = false;","};","","// Upload recorded audio/video to server.","M.tinymce_recordrtc.uploadToServer = function(type, callback) {","    var xhr = new XMLHttpRequest();","","    // Get src media of audio/video tag.","    xhr.open('GET', player.src, true);","    xhr.responseType = 'blob';","","    xhr.onload = function() {","        if (xhr.status === 200) { // If src media was successfully retrieved.","            // blob is now the media that the audio/video tag's src pointed to.","            var blob = this.response;","","            // Generate filename with random ID and file extension.","            var fileName = (Math.random() * 1000).toString().replace('.', '');","            if (type === 'audio') {","                fileName += '-audio.ogg';","            } else {","                fileName += '-video.webm';","            }","","            // Create FormData to send to PHP upload/save script.","            var formData = new FormData();","            formData.append('contextid', recordrtc.contextid);","            formData.append('sesskey', parent.M.cfg.sesskey);","            formData.append(type + '-filename', fileName);","            formData.append(type + '-blob', blob);","","            // Pass FormData to PHP script using XHR.","            M.tinymce_recordrtc.makeXMLHttpRequest('save.php', formData, function(progress, responseText) {","                if (progress === 'upload-ended') {","                    var initialURL = location.href.replace(location.href.split('/').pop(), '') + 'uploads.php/';","                    callback('ended', initialURL + responseText);","                } else {","                    callback(progress);","                }","            });","        }","    };","","    xhr.send();","};","","// Handle XHR sending/receiving/status.","M.tinymce_recordrtc.makeXMLHttpRequest = function(url, data, callback) {","    var xhr = new XMLHttpRequest();","","    xhr.onreadystatechange = function() {","        if ((xhr.readyState === 4) && (xhr.status === 200)) { // When request is finished and successful.","            callback('upload-ended', xhr.responseText);","        } else if (xhr.status === 404) { // When request returns 404 Not Found.","            callback('upload-failed-404');","        }","    };","","    xhr.upload.onprogress = function(event) {","        callback(Math.round(event.loaded / event.total * 100) + \"% \" + M.util.get_string('uploadprogress', 'tinymce_recordrtc'));","    };","","    xhr.upload.onerror = function(error) {","        callback('upload-failed', error);","    };","","    xhr.upload.onabort = function(error) {","        callback('upload-aborted', error);","    };","","    // POST FormData to PHP script that handles uploading/saving.","    xhr.open('POST', url);","    xhr.send(data);","};","","// Makes 1min and 2s display as 1:02 on timer instead of 1:2, for example.","M.tinymce_recordrtc.pad = function(val) {","    var valString = val + \"\";","","    if (valString.length < 2) {","        return \"0\" + valString;","    } else {","        return valString;","    }","};","","// Functionality to make recording timer count down.","// Also makes recording stop when time limit is hit.","M.tinymce_recordrtc.setTime = function() {","    countdownSeconds--;","","    startStopBtn.querySelector('span#seconds').textContent = M.tinymce_recordrtc.pad(countdownSeconds % 60);","    startStopBtn.querySelector('span#minutes').textContent = M.tinymce_recordrtc.pad(parseInt(countdownSeconds / 60));","","    if (countdownSeconds === 0) {","        startStopBtn.click();","    }","};","","// Generates link to recorded annotation to be inserted.","M.tinymce_recordrtc.create_annotation = function(type, recording_url) {","    var linkText = window.prompt(M.util.get_string('annotationprompt', 'tinymce_recordrtc'),","                                 M.util.get_string('annotation:' + type, 'tinymce_recordrtc'));","","    // Return HTML for annotation link, if user did not press \"Cancel\".","    if (!linkText) {","        return undefined;","    } else {","        var annotation = '<div id=\"recordrtc_annotation\" class=\"text-center\"><a target=\"_blank\" href=\"' + recording_url + '\">' + linkText + '</a></div>';","        return annotation;","    }","};","","// Inserts link to annotation in editor text area.","M.tinymce_recordrtc.insert_annotation = function(type, recording_url) {","    var annotation = M.tinymce_recordrtc.create_annotation(type, recording_url);","","    // Insert annotation link.","    // If user pressed \"Cancel\", just go back to main recording screen.","    if (!annotation) {","        uploadBtn.textContent = M.util.get_string('attachrecording', 'tinymce_recordrtc');","    } else {","        tinyMCEPopup.editor.execCommand('mceInsertContent', false, annotation);","        tinyMCEPopup.close();","    }","};","","","}, '@VERSION@', {\"requires\": []});","","}());"]};
}
var __cov_Zhmclu7TsGqwFNbig6XCJg = __coverage__['build/moodle-atto_recordrtc-commonmodule/moodle-atto_recordrtc-commonmodule.js'];
__cov_Zhmclu7TsGqwFNbig6XCJg.s['1']++;YUI.add('moodle-atto_recordrtc-commonmodule',function(Y,NAME){__cov_Zhmclu7TsGqwFNbig6XCJg.f['1']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['2']++;M.tinymce_recordrtc=(__cov_Zhmclu7TsGqwFNbig6XCJg.b['1'][0]++,M.tinymce_recordrtc)||(__cov_Zhmclu7TsGqwFNbig6XCJg.b['1'][1]++,{});__cov_Zhmclu7TsGqwFNbig6XCJg.s['3']++;(function(){__cov_Zhmclu7TsGqwFNbig6XCJg.f['2']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['4']++;var params={};__cov_Zhmclu7TsGqwFNbig6XCJg.s['5']++;var r=/([^&=]+)=?([^&]*)/g;__cov_Zhmclu7TsGqwFNbig6XCJg.s['6']++;var d=function(s){__cov_Zhmclu7TsGqwFNbig6XCJg.f['3']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['7']++;return decodeURIComponent(s.replace(/\+/g,' '));};__cov_Zhmclu7TsGqwFNbig6XCJg.s['8']++;var search=window.location.search;__cov_Zhmclu7TsGqwFNbig6XCJg.s['9']++;var match=r.exec(search.substring(1));__cov_Zhmclu7TsGqwFNbig6XCJg.s['10']++;while(match){__cov_Zhmclu7TsGqwFNbig6XCJg.s['11']++;params[d(match[1])]=d(match[2]);__cov_Zhmclu7TsGqwFNbig6XCJg.s['12']++;if((__cov_Zhmclu7TsGqwFNbig6XCJg.b['3'][0]++,d(match[2])==='true')||(__cov_Zhmclu7TsGqwFNbig6XCJg.b['3'][1]++,d(match[2])==='false')){__cov_Zhmclu7TsGqwFNbig6XCJg.b['2'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['13']++;params[d(match[1])]=d(match[2])==='true'?(__cov_Zhmclu7TsGqwFNbig6XCJg.b['4'][0]++,true):(__cov_Zhmclu7TsGqwFNbig6XCJg.b['4'][1]++,false);}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['2'][1]++;}__cov_Zhmclu7TsGqwFNbig6XCJg.s['14']++;match=r.exec(search.substring(1));}__cov_Zhmclu7TsGqwFNbig6XCJg.s['15']++;window.params=params;}());__cov_Zhmclu7TsGqwFNbig6XCJg.s['16']++;var player=null;__cov_Zhmclu7TsGqwFNbig6XCJg.s['17']++;var startStopBtn=null;__cov_Zhmclu7TsGqwFNbig6XCJg.s['18']++;var uploadBtn=null;__cov_Zhmclu7TsGqwFNbig6XCJg.s['19']++;var countdownSeconds=null;__cov_Zhmclu7TsGqwFNbig6XCJg.s['20']++;var countdownTicker=null;__cov_Zhmclu7TsGqwFNbig6XCJg.s['21']++;var recType=null;__cov_Zhmclu7TsGqwFNbig6XCJg.s['22']++;var mediaRecorder=null;__cov_Zhmclu7TsGqwFNbig6XCJg.s['23']++;var chunks=null;__cov_Zhmclu7TsGqwFNbig6XCJg.s['24']++;var blobSize=null;__cov_Zhmclu7TsGqwFNbig6XCJg.s['25']++;var maxUploadSize=null;__cov_Zhmclu7TsGqwFNbig6XCJg.s['26']++;M.tinymce_recordrtc.check_secure=function(){__cov_Zhmclu7TsGqwFNbig6XCJg.f['4']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['27']++;var isSecureOrigin=(__cov_Zhmclu7TsGqwFNbig6XCJg.b['5'][0]++,window.location.protocol==='https:')||(__cov_Zhmclu7TsGqwFNbig6XCJg.b['5'][1]++,window.location.host.indexOf('localhost')!==-1);__cov_Zhmclu7TsGqwFNbig6XCJg.s['28']++;if(!isSecureOrigin){__cov_Zhmclu7TsGqwFNbig6XCJg.b['6'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['29']++;window.alert(M.util.get_string('insecurealert','tinymce_recordrtc'));__cov_Zhmclu7TsGqwFNbig6XCJg.s['30']++;tinyMCEPopup.close();}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['6'][1]++;}};__cov_Zhmclu7TsGqwFNbig6XCJg.s['31']++;M.tinymce_recordrtc.check_browser=function(){__cov_Zhmclu7TsGqwFNbig6XCJg.f['5']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['32']++;if(!((__cov_Zhmclu7TsGqwFNbig6XCJg.b['8'][0]++,bowser.firefox)&&(__cov_Zhmclu7TsGqwFNbig6XCJg.b['8'][1]++,bowser.version>=29)||(__cov_Zhmclu7TsGqwFNbig6XCJg.b['8'][2]++,bowser.chrome)&&(__cov_Zhmclu7TsGqwFNbig6XCJg.b['8'][3]++,bowser.version>=49)||(__cov_Zhmclu7TsGqwFNbig6XCJg.b['8'][4]++,bowser.opera)&&(__cov_Zhmclu7TsGqwFNbig6XCJg.b['8'][5]++,bowser.version>=36))){__cov_Zhmclu7TsGqwFNbig6XCJg.b['7'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['33']++;var alert=document.querySelector('div[id=alert-warning]');__cov_Zhmclu7TsGqwFNbig6XCJg.s['34']++;alert.parentElement.parentElement.classList.remove('hide');}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['7'][1]++;}};__cov_Zhmclu7TsGqwFNbig6XCJg.s['35']++;M.tinymce_recordrtc.captureUserMedia=function(mediaConstraints,successCallback,errorCallback){__cov_Zhmclu7TsGqwFNbig6XCJg.f['6']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['36']++;navigator.mediaDevices.getUserMedia(mediaConstraints).then(successCallback).catch(errorCallback);};__cov_Zhmclu7TsGqwFNbig6XCJg.s['37']++;M.tinymce_recordrtc.handleDataAvailable=function(event){__cov_Zhmclu7TsGqwFNbig6XCJg.f['7']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['38']++;blobSize+=event.data.size;__cov_Zhmclu7TsGqwFNbig6XCJg.s['39']++;if((__cov_Zhmclu7TsGqwFNbig6XCJg.b['10'][0]++,blobSize>=maxUploadSize)&&(__cov_Zhmclu7TsGqwFNbig6XCJg.b['10'][1]++,!localStorage.getItem('alerted'))){__cov_Zhmclu7TsGqwFNbig6XCJg.b['9'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['40']++;localStorage.setItem('alerted','true');__cov_Zhmclu7TsGqwFNbig6XCJg.s['41']++;startStopBtn.click();__cov_Zhmclu7TsGqwFNbig6XCJg.s['42']++;window.alert(M.util.get_string('nearingmaxsize','tinymce_recordrtc'));}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['9'][1]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['43']++;if((__cov_Zhmclu7TsGqwFNbig6XCJg.b['12'][0]++,blobSize>=maxUploadSize)&&(__cov_Zhmclu7TsGqwFNbig6XCJg.b['12'][1]++,localStorage.getItem('alerted')==='true')){__cov_Zhmclu7TsGqwFNbig6XCJg.b['11'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['44']++;localStorage.removeItem('alerted');}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['11'][1]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['45']++;chunks.push(event.data);}}};__cov_Zhmclu7TsGqwFNbig6XCJg.s['46']++;M.tinymce_recordrtc.startRecording=function(type,stream){__cov_Zhmclu7TsGqwFNbig6XCJg.f['8']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['47']++;var options=null;__cov_Zhmclu7TsGqwFNbig6XCJg.s['48']++;if(type==='audio'){__cov_Zhmclu7TsGqwFNbig6XCJg.b['13'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['49']++;if(MediaRecorder.isTypeSupported('audio/webm;codecs=opus')){__cov_Zhmclu7TsGqwFNbig6XCJg.b['14'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['50']++;options={audioBitsPerSecond:params['audiobitrate'],mimeType:'audio/webm;codecs=opus'};}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['14'][1]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['51']++;if(MediaRecorder.isTypeSupported('audio/ogg;codecs=opus')){__cov_Zhmclu7TsGqwFNbig6XCJg.b['15'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['52']++;options={audioBitsPerSecond:params['audiobitrate'],mimeType:'audio/ogg;codecs=opus'};}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['15'][1]++;}}}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['13'][1]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['53']++;if(MediaRecorder.isTypeSupported('video/webm;codecs=vp9,opus')){__cov_Zhmclu7TsGqwFNbig6XCJg.b['16'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['54']++;options={audioBitsPerSecond:params['audiobitrate'],videoBitsPerSecond:params['videobitrate'],mimeType:'video/webm;codecs=vp9,opus'};}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['16'][1]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['55']++;if(MediaRecorder.isTypeSupported('video/webm;codecs=h264,opus')){__cov_Zhmclu7TsGqwFNbig6XCJg.b['17'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['56']++;options={audioBitsPerSecond:params['audiobitrate'],videoBitsPerSecond:params['videobitrate'],mimeType:'video/webm;codecs=h264,opus'};}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['17'][1]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['57']++;if(MediaRecorder.isTypeSupported('video/webm;codecs=vp8,opus')){__cov_Zhmclu7TsGqwFNbig6XCJg.b['18'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['58']++;options={audioBitsPerSecond:params['audiobitrate'],videoBitsPerSecond:params['videobitrate'],mimeType:'video/webm;codecs=vp8,opus'};}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['18'][1]++;}}}}__cov_Zhmclu7TsGqwFNbig6XCJg.s['59']++;mediaRecorder=options?(__cov_Zhmclu7TsGqwFNbig6XCJg.b['19'][0]++,new MediaRecorder(stream)):(__cov_Zhmclu7TsGqwFNbig6XCJg.b['19'][1]++,new MediaRecorder(stream,options));__cov_Zhmclu7TsGqwFNbig6XCJg.s['60']++;mediaRecorder.ondataavailable=M.tinymce_recordrtc.handleDataAvailable;__cov_Zhmclu7TsGqwFNbig6XCJg.s['61']++;mediaRecorder.start(1000);__cov_Zhmclu7TsGqwFNbig6XCJg.s['62']++;player.muted=true;__cov_Zhmclu7TsGqwFNbig6XCJg.s['63']++;countdownSeconds=params['timelimit'];__cov_Zhmclu7TsGqwFNbig6XCJg.s['64']++;countdownSeconds++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['65']++;startStopBtn.innerHTML=M.util.get_string('stoprecording','tinymce_recordrtc')+' (<span id="minutes"></span>:<span id="seconds"></span>)';__cov_Zhmclu7TsGqwFNbig6XCJg.s['66']++;M.tinymce_recordrtc.setTime();__cov_Zhmclu7TsGqwFNbig6XCJg.s['67']++;countdownTicker=setInterval(M.tinymce_recordrtc.setTime,1000);__cov_Zhmclu7TsGqwFNbig6XCJg.s['68']++;startStopBtn.disabled=false;};__cov_Zhmclu7TsGqwFNbig6XCJg.s['69']++;M.tinymce_recordrtc.uploadToServer=function(type,callback){__cov_Zhmclu7TsGqwFNbig6XCJg.f['9']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['70']++;var xhr=new XMLHttpRequest();__cov_Zhmclu7TsGqwFNbig6XCJg.s['71']++;xhr.open('GET',player.src,true);__cov_Zhmclu7TsGqwFNbig6XCJg.s['72']++;xhr.responseType='blob';__cov_Zhmclu7TsGqwFNbig6XCJg.s['73']++;xhr.onload=function(){__cov_Zhmclu7TsGqwFNbig6XCJg.f['10']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['74']++;if(xhr.status===200){__cov_Zhmclu7TsGqwFNbig6XCJg.b['20'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['75']++;var blob=this.response;__cov_Zhmclu7TsGqwFNbig6XCJg.s['76']++;var fileName=(Math.random()*1000).toString().replace('.','');__cov_Zhmclu7TsGqwFNbig6XCJg.s['77']++;if(type==='audio'){__cov_Zhmclu7TsGqwFNbig6XCJg.b['21'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['78']++;fileName+='-audio.ogg';}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['21'][1]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['79']++;fileName+='-video.webm';}__cov_Zhmclu7TsGqwFNbig6XCJg.s['80']++;var formData=new FormData();__cov_Zhmclu7TsGqwFNbig6XCJg.s['81']++;formData.append('contextid',recordrtc.contextid);__cov_Zhmclu7TsGqwFNbig6XCJg.s['82']++;formData.append('sesskey',parent.M.cfg.sesskey);__cov_Zhmclu7TsGqwFNbig6XCJg.s['83']++;formData.append(type+'-filename',fileName);__cov_Zhmclu7TsGqwFNbig6XCJg.s['84']++;formData.append(type+'-blob',blob);__cov_Zhmclu7TsGqwFNbig6XCJg.s['85']++;M.tinymce_recordrtc.makeXMLHttpRequest('save.php',formData,function(progress,responseText){__cov_Zhmclu7TsGqwFNbig6XCJg.f['11']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['86']++;if(progress==='upload-ended'){__cov_Zhmclu7TsGqwFNbig6XCJg.b['22'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['87']++;var initialURL=location.href.replace(location.href.split('/').pop(),'')+'uploads.php/';__cov_Zhmclu7TsGqwFNbig6XCJg.s['88']++;callback('ended',initialURL+responseText);}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['22'][1]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['89']++;callback(progress);}});}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['20'][1]++;}};__cov_Zhmclu7TsGqwFNbig6XCJg.s['90']++;xhr.send();};__cov_Zhmclu7TsGqwFNbig6XCJg.s['91']++;M.tinymce_recordrtc.makeXMLHttpRequest=function(url,data,callback){__cov_Zhmclu7TsGqwFNbig6XCJg.f['12']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['92']++;var xhr=new XMLHttpRequest();__cov_Zhmclu7TsGqwFNbig6XCJg.s['93']++;xhr.onreadystatechange=function(){__cov_Zhmclu7TsGqwFNbig6XCJg.f['13']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['94']++;if((__cov_Zhmclu7TsGqwFNbig6XCJg.b['24'][0]++,xhr.readyState===4)&&(__cov_Zhmclu7TsGqwFNbig6XCJg.b['24'][1]++,xhr.status===200)){__cov_Zhmclu7TsGqwFNbig6XCJg.b['23'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['95']++;callback('upload-ended',xhr.responseText);}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['23'][1]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['96']++;if(xhr.status===404){__cov_Zhmclu7TsGqwFNbig6XCJg.b['25'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['97']++;callback('upload-failed-404');}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['25'][1]++;}}};__cov_Zhmclu7TsGqwFNbig6XCJg.s['98']++;xhr.upload.onprogress=function(event){__cov_Zhmclu7TsGqwFNbig6XCJg.f['14']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['99']++;callback(Math.round(event.loaded/event.total*100)+'% '+M.util.get_string('uploadprogress','tinymce_recordrtc'));};__cov_Zhmclu7TsGqwFNbig6XCJg.s['100']++;xhr.upload.onerror=function(error){__cov_Zhmclu7TsGqwFNbig6XCJg.f['15']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['101']++;callback('upload-failed',error);};__cov_Zhmclu7TsGqwFNbig6XCJg.s['102']++;xhr.upload.onabort=function(error){__cov_Zhmclu7TsGqwFNbig6XCJg.f['16']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['103']++;callback('upload-aborted',error);};__cov_Zhmclu7TsGqwFNbig6XCJg.s['104']++;xhr.open('POST',url);__cov_Zhmclu7TsGqwFNbig6XCJg.s['105']++;xhr.send(data);};__cov_Zhmclu7TsGqwFNbig6XCJg.s['106']++;M.tinymce_recordrtc.pad=function(val){__cov_Zhmclu7TsGqwFNbig6XCJg.f['17']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['107']++;var valString=val+'';__cov_Zhmclu7TsGqwFNbig6XCJg.s['108']++;if(valString.length<2){__cov_Zhmclu7TsGqwFNbig6XCJg.b['26'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['109']++;return'0'+valString;}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['26'][1]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['110']++;return valString;}};__cov_Zhmclu7TsGqwFNbig6XCJg.s['111']++;M.tinymce_recordrtc.setTime=function(){__cov_Zhmclu7TsGqwFNbig6XCJg.f['18']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['112']++;countdownSeconds--;__cov_Zhmclu7TsGqwFNbig6XCJg.s['113']++;startStopBtn.querySelector('span#seconds').textContent=M.tinymce_recordrtc.pad(countdownSeconds%60);__cov_Zhmclu7TsGqwFNbig6XCJg.s['114']++;startStopBtn.querySelector('span#minutes').textContent=M.tinymce_recordrtc.pad(parseInt(countdownSeconds/60));__cov_Zhmclu7TsGqwFNbig6XCJg.s['115']++;if(countdownSeconds===0){__cov_Zhmclu7TsGqwFNbig6XCJg.b['27'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['116']++;startStopBtn.click();}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['27'][1]++;}};__cov_Zhmclu7TsGqwFNbig6XCJg.s['117']++;M.tinymce_recordrtc.create_annotation=function(type,recording_url){__cov_Zhmclu7TsGqwFNbig6XCJg.f['19']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['118']++;var linkText=window.prompt(M.util.get_string('annotationprompt','tinymce_recordrtc'),M.util.get_string('annotation:'+type,'tinymce_recordrtc'));__cov_Zhmclu7TsGqwFNbig6XCJg.s['119']++;if(!linkText){__cov_Zhmclu7TsGqwFNbig6XCJg.b['28'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['120']++;return undefined;}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['28'][1]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['121']++;var annotation='<div id="recordrtc_annotation" class="text-center"><a target="_blank" href="'+recording_url+'">'+linkText+'</a></div>';__cov_Zhmclu7TsGqwFNbig6XCJg.s['122']++;return annotation;}};__cov_Zhmclu7TsGqwFNbig6XCJg.s['123']++;M.tinymce_recordrtc.insert_annotation=function(type,recording_url){__cov_Zhmclu7TsGqwFNbig6XCJg.f['20']++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['124']++;var annotation=M.tinymce_recordrtc.create_annotation(type,recording_url);__cov_Zhmclu7TsGqwFNbig6XCJg.s['125']++;if(!annotation){__cov_Zhmclu7TsGqwFNbig6XCJg.b['29'][0]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['126']++;uploadBtn.textContent=M.util.get_string('attachrecording','tinymce_recordrtc');}else{__cov_Zhmclu7TsGqwFNbig6XCJg.b['29'][1]++;__cov_Zhmclu7TsGqwFNbig6XCJg.s['127']++;tinyMCEPopup.editor.execCommand('mceInsertContent',false,annotation);__cov_Zhmclu7TsGqwFNbig6XCJg.s['128']++;tinyMCEPopup.close();}};},'@VERSION@',{'requires':[]});
